# 15장 예외 처리 — 연습문제

---

## 📝 객관식 문제

---

### 🟢 초급

**문제 1.** 파이썬에서 예외를 처리하는 키워드 조합은?

① `try-catch`  
② `try-except`  
③ `if-else`  
④ `begin-rescue`  

---

**문제 2.** 다음 코드에서 `int("abc")`를 실행하면 발생하는 예외는?

```python
number = int("abc")
```

① `TypeError`  
② `ValueError`  
③ `IndexError`  
④ `KeyError`  

---

**문제 3.** 다음 코드의 실행 결과는?

```python
try:
    print("시작")
    x = 10 / 0
    print("끝")
except ZeroDivisionError:
    print("오류")
print("계속")
```

① 시작 → 끝 → 계속  
② 시작 → 오류 → 계속  
③ 오류 → 계속  
④ 시작 → 오류  

---

**문제 4.** 존재하지 않는 파일을 읽기 모드로 열 때 발생하는 예외는?

① `ValueError`  
② `IOError`  
③ `FileNotFoundError`  
④ `PermissionError`  

---

**문제 5.** 다음 코드의 실행 결과는? (입력: `abc`)

```python
try:
    num = int(input("숫자: "))
    print(num * 2)
except ValueError:
    print("오류!")
```

① `abc2`  
② `오류!`  
③ 프로그램 중단  
④ `abc`  

---

**문제 6.** 다음 코드의 실행 결과는?

```python
try:
    fruits = ["사과", "바나나"]
    print(fruits[5])
except IndexError:
    print("범위 초과")
print("종료")
```

① `범위 초과`  
② `범위 초과` → `종료`  
③ 프로그램 중단  
④ `종료`  

---

**문제 7.** 다음 중 `try-except`를 사용하기 **적절하지 않은** 경우는?

① 사용자에게 숫자를 입력받을 때  
② 파일을 열어서 읽을 때  
③ 두 정수를 더하는 `1 + 2` 계산  
④ 딕셔너리에서 키로 값을 검색할 때  

---

### 🟡 중급

**문제 8.** 다음 코드의 실행 결과는? (입력: `0`)

```python
try:
    num = int(input("숫자: "))
    result = 100 / num
    print(f"결과: {result}")
except ValueError:
    print("값 오류")
except ZeroDivisionError:
    print("0 오류")
```

① `결과: 0`  
② `값 오류`  
③ `0 오류`  
④ 프로그램 중단  

---

**문제 9.** `finally` 절의 특징으로 옳은 것은?

① 예외가 발생했을 때만 실행된다  
② 예외가 없을 때만 실행된다  
③ 예외 발생 여부와 **관계없이 항상** 실행된다  
④ `except` 블록이 없으면 사용할 수 없다  

---

**문제 10.** 다음 코드의 실행 결과는?

```python
try:
    print("A")
    x = 10 / 2
    print("B")
except ZeroDivisionError:
    print("C")
finally:
    print("D")
```

① A → B → D  
② A → C → D  
③ A → B → C → D  
④ A → D  

---

**문제 11.** `else` 절이 실행되는 조건은?

```python
try:
    code()
except ValueError:
    handle_error()
else:
    success()
```

① 항상 실행된다  
② `except` 블록이 실행된 후에 실행된다  
③ `try` 블록에서 **예외가 발생하지 않았을 때만** 실행된다  
④ `try` 블록에서 예외가 발생했을 때만 실행된다  

---

**문제 12.** 다음 코드의 실행 결과는? (입력: `5`)

```python
try:
    x = int(input())
    y = 10 / x
except ZeroDivisionError:
    print("0 오류")
except ValueError:
    print("값 오류")
else:
    print("성공")
finally:
    print("종료")
```

① `성공` → `종료`  
② `0 오류` → `종료`  
③ `값 오류` → `종료`  
④ `종료`  

---

### 🔴 고급

**문제 13.** `as` 키워드의 역할로 옳은 것은?

```python
except ValueError as e:
    print(e)
```

① 예외를 무시한다  
② **예외 메시지를 변수에 저장**한다  
③ 예외 유형을 변경한다  
④ 예외를 다시 발생시킨다  

---

**문제 14.** 다음 코드의 실행 결과는?

```python
def check_age(age):
    if age < 0:
        raise ValueError("나이는 0 이상이어야 합니다")
    return age

try:
    result = check_age(-5)
    print(f"나이: {result}")
except ValueError as e:
    print(f"오류: {e}")
```

① `나이: -5`  
② `오류: 나이는 0 이상이어야 합니다`  
③ 프로그램 중단  
④ `오류: -5`  

---

**문제 15.** 다음 코드의 실행 결과는?

```python
try:
    print("1")
    x = 10 / 0
    print("2")
except ZeroDivisionError:
    print("3")
else:
    print("4")
finally:
    print("5")
print("6")
```

① 1 → 2 → 4 → 5 → 6  
② 1 → 3 → 5 → 6  
③ 1 → 3 → 4 → 5 → 6  
④ 1 → 3 → 5  

---

## 📝 주관식 문제

---

### 🟢 초급

**문제 16.** 예외 처리가 필요한 이유를 2가지 이상 설명하고, 예외 처리가 없을 때와 있을 때의 차이를 설명하시오.

---

**문제 17.** 다음 코드의 실행 결과를 각 입력별로 쓰시오.

```python
try:
    num = int(input("숫자: "))
    print(f"결과: {100 / num}")
except ValueError:
    print("숫자가 아닙니다")
except ZeroDivisionError:
    print("0으로 나눌 수 없습니다")
print("프로그램 종료")
```

입력 ①: `10` / 입력 ②: `abc` / 입력 ③: `0`

---

**문제 18.** `try-except` 구문에서 `except`에 예외 유형을 지정하는 것과 지정하지 않는 것의 차이점을 설명하시오.

```python
# 유형 지정
except ValueError:
    print("값 오류")

# 유형 미지정
except:
    print("오류 발생")
```

---

### 🟡 중급

**문제 19.** 다음 코드의 실행 결과를 쓰고, `try-except-else-finally`의 **실행 순서 규칙**을 설명하시오.

```python
try:
    number = int("42")
    print(f"변환 성공: {number}")
except ValueError:
    print("변환 실패")
else:
    print(f"두 배: {number * 2}")
finally:
    print("작업 완료")
```

---

**문제 20.** 다음 코드의 실행 결과를 쓰고, `as` 키워드를 사용하여 예외 메시지를 받는 방법과 활용법을 설명하시오.

```python
data = {"이름": "김철수", "나이": 20}

try:
    print(data["이름"])
    print(data["학과"])
except KeyError as e:
    print(f"키 오류: {e}")
    print("등록되지 않은 항목입니다")
```

---

### 🔴 고급

**문제 21.** `raise` 키워드의 역할을 설명하고, 다음 코드의 실행 결과를 쓰시오.

```python
def set_score(score):
    if score < 0 or score > 100:
        raise ValueError(f"점수는 0~100 사이여야 합니다: {score}")
    return score

results = []
test_scores = [85, 150, -10, 92]

for s in test_scores:
    try:
        valid = set_score(s)
        results.append(valid)
        print(f"✓ {valid}점 등록")
    except ValueError as e:
        print(f"✗ {e}")

print(f"등록된 점수: {results}")
```

---

## 💻 실습형 문제

---

### 🟢 초급

**문제 22.** 다음 요구사항에 맞는 프로그램을 작성하시오.

> 사용자에게 두 숫자를 입력받아 나눗셈을 수행하되, 다음 예외를 모두 처리하시오.
> - `ValueError`: 숫자가 아닌 값을 입력한 경우
> - `ZeroDivisionError`: 0으로 나누는 경우
>
> 올바른 입력이 들어올 때까지 `while` 루프로 반복합니다.

출력 예시:

```
첫 번째 숫자: abc
❌ 숫자를 입력해주세요!

첫 번째 숫자: 10
두 번째 숫자: 0
❌ 0으로 나눌 수 없습니다!

첫 번째 숫자: 10
두 번째 숫자: 3
✓ 10 ÷ 3 = 3.3333
```

---

**문제 23.** 다음 요구사항에 맞는 프로그램을 작성하시오.

> 과일 리스트 `fruits = ["사과", "바나나", "오렌지", "포도", "딸기"]`에서 인덱스로 과일을 선택하는 프로그램을 작성하되, `ValueError`와 `IndexError`를 처리하시오.

출력 예시:

```
과일 목록: 0.사과 1.바나나 2.오렌지 3.포도 4.딸기

인덱스 입력: abc
❌ 숫자를 입력해주세요!

인덱스 입력: 10
❌ 0~4 사이의 번호를 입력해주세요!

인덱스 입력: 2
✓ 선택한 과일: 오렌지
```

---

### 🟡 중급

**문제 24.** 다음 요구사항에 맞는 프로그램을 작성하시오.

> 학생 5명의 점수를 입력받아 성적표를 출력하시오.
> - 이름과 점수를 입력받되, 점수가 숫자가 아니거나 0~100 범위를 벗어나면 `raise`로 예외를 발생시키시오.
> - 잘못된 입력은 건너뛰고 다음 학생을 입력받습니다.
> - `else`로 성공 시에만 딕셔너리에 저장합니다.
> - `finally`로 매 입력 후 `"--- 입력 처리 완료 ---"`를 출력합니다.

출력 예시:

```
[1번 학생]
이름: 김철수
점수: 85
✓ 등록 완료
--- 입력 처리 완료 ---

[2번 학생]
이름: 박영희
점수: 150
✗ 점수는 0~100 사이여야 합니다
--- 입력 처리 완료 ---

=== 성적표 ===
김철수: 85점
총 등록: 1명
```

---

**문제 25.** 다음 요구사항에 맞는 프로그램을 작성하시오.

> 딕셔너리 기반 전화번호부에서 검색, 추가, 삭제를 수행하되 모든 예외를 처리하시오.
>
> 초기 데이터: `{"김철수": "010-1111-2222", "박영희": "010-3333-4444"}`
> - 검색: 없는 이름은 `KeyError` 처리
> - 추가: 이름이 비어있으면 `raise ValueError`
> - 삭제: 없는 이름은 `KeyError` 처리

출력 예시:

```
=== 전화번호부 ===
1. 검색  2. 추가  3. 삭제  4. 목록  5. 종료

선택: 1
이름: 홍길동
❌ '홍길동'이(가) 등록되지 않았습니다

선택: 2
이름: 이민수
번호: 010-5555-6666
✓ 이민수 추가 완료

선택: 4
김철수: 010-1111-2222
박영희: 010-3333-4444
이민수: 010-5555-6666
총 3명
```

---

### 🔴 고급

**문제 26.** 다음 요구사항에 맞는 프로그램을 작성하시오.

> 간이 은행 시스템을 구현하시오. 모든 입력과 비즈니스 로직에 예외 처리를 적용합니다.
>
> - 초기 잔액: 100,000원
> - 입금: 금액이 양수인지, 숫자인지 검증 (`raise ValueError`)
> - 출금: 잔액 부족 시 `raise ValueError`, 1회 출금 한도 500,000원
> - 모든 거래 내역을 리스트에 저장
> - `try-except-else-finally` 구조를 모두 활용

출력 예시:

```
=== 간이 은행 ===
잔액: 100,000원

[입금] 금액: 50000
✓ 50,000원 입금 완료 | 잔액: 150,000원

[출금] 금액: 200000
✗ 잔액이 부족합니다 (잔액: 150,000원)

[출금] 금액: 30000
✓ 30,000원 출금 완료 | 잔액: 120,000원

=== 거래 내역 ===
1. [입금] 50,000원 → 잔액 150,000원
2. [출금] 30,000원 → 잔액 120,000원
최종 잔액: 120,000원
```

---
---

# 🔑 정답 및 해설

---

## 📝 객관식 정답

---

### 🟢 초급

**문제 1. 정답: ② `try-except`**

파이썬은 `try-except` 키워드로 예외를 처리합니다. Java나 C++의 `try-catch`와는 다릅니다.

---

**문제 2. 정답: ② `ValueError`**

`int("abc")`는 문자열 `"abc"`를 정수로 변환할 수 없으므로 **`ValueError`**(잘못된 값)가 발생합니다.

---

**문제 3. 정답: ② 시작 → 오류 → 계속**

`print("시작")` 실행 후, `10 / 0`에서 `ZeroDivisionError`가 발생합니다. `print("끝")`은 실행되지 않고, `except` 블록의 `print("오류")`가 실행됩니다. 예외가 처리되었으므로 프로그램은 계속 진행되어 `print("계속")`이 실행됩니다.

---

**문제 4. 정답: ③ `FileNotFoundError`**

존재하지 않는 파일을 `"r"` 모드로 열면 `FileNotFoundError`가 발생합니다.

---

**문제 5. 정답: ② `오류!`**

`"abc"`를 `int()`로 변환할 수 없어 `ValueError`가 발생하고, `except` 블록의 `"오류!"`가 출력됩니다.

---

**문제 6. 정답: ② `범위 초과` → `종료`**

`fruits[5]`에서 `IndexError`가 발생하여 `"범위 초과"`가 출력됩니다. 예외가 처리되었으므로 프로그램은 계속 진행되어 `"종료"`도 출력됩니다.

---

**문제 7. 정답: ③ 두 정수를 더하는 `1 + 2` 계산**

`1 + 2`는 절대로 예외가 발생하지 않는 안전한 연산입니다. `try-except`는 예외가 발생할 **가능성이 있는** 코드에만 사용해야 합니다.

---

### 🟡 중급

**문제 8. 정답: ③ `0 오류`**

입력 `0`은 `int()`로 정상 변환됩니다(ValueError 아님). 그러나 `100 / 0`에서 `ZeroDivisionError`가 발생하여 `"0 오류"`가 출력됩니다.

---

**문제 9. 정답: ③ 예외 발생 여부와 관계없이 항상 실행된다**

`finally` 블록은 **항상** 실행됩니다. 예외가 발생하든, 정상 실행되든 `finally`는 실행됩니다.

---

**문제 10. 정답: ① A → B → D**

`10 / 2 = 5.0`으로 예외가 발생하지 않습니다. `try` 블록의 A, B가 출력됩니다. 예외가 없으므로 `except`(C)는 건너뜁니다. `finally`(D)는 항상 실행됩니다.

---

**문제 11. 정답: ③ `try` 블록에서 예외가 발생하지 않았을 때만 실행된다**

`else`는 `try` 블록이 **성공적으로** 완료되었을 때만 실행됩니다. 예외가 발생하면 `except`가 실행되고, `else`는 건너뜁니다.

---

**문제 12. 정답: ① `성공` → `종료`**

입력 `5`는 `int()` 변환 성공, `10 / 5 = 2.0`으로 예외 없음. `else`의 `"성공"` 출력 후 `finally`의 `"종료"` 출력.

---

### 🔴 고급

**문제 13. 정답: ② 예외 메시지를 변수에 저장한다**

`as e`는 발생한 예외 객체를 변수 `e`에 저장합니다. `print(e)`로 예외의 상세 메시지를 출력할 수 있습니다.

---

**문제 14. 정답: ② `오류: 나이는 0 이상이어야 합니다`**

`check_age(-5)`에서 `age < 0`이므로 `raise ValueError(...)`로 예외가 발생합니다. `except`가 이를 잡아서 메시지를 출력합니다.

---

**문제 15. 정답: ② 1 → 3 → 5 → 6**

실행 흐름:
1. `print("1")` → 출력
2. `10 / 0` → `ZeroDivisionError` 발생 → `print("2")` 건너뜀
3. `except` → `print("3")` 출력
4. 예외가 발생했으므로 `else`의 `print("4")` 건너뜀
5. `finally` → `print("5")` 항상 실행
6. `print("6")` → 프로그램 계속

---

## 📝 주관식 정답

---

### 🟢 초급

**문제 16. 모범답안:**

**예외 처리가 필요한 이유:**
1. **프로그램 안정성**: 예외가 발생해도 프로그램이 중단되지 않고 계속 실행됩니다.
2. **사용자 친화성**: 오류 발생 시 이해할 수 있는 메시지를 보여주어 사용자가 문제를 수정할 수 있습니다.
3. **데이터 보호**: 예외 발생 시에도 파일 닫기, 데이터 저장 등 정리 작업을 수행할 수 있습니다.

**차이점:**
- 예외 처리 **없음**: 잘못된 입력 시 오류 메시지와 함께 프로그램이 즉시 종료됩니다.
- 예외 처리 **있음**: 잘못된 입력을 감지하고 친절한 안내 메시지를 보여준 후, 다시 시도할 기회를 제공합니다.

---

**문제 17. 모범답안:**

**입력 ① `10`:**
```
숫자: 10
결과: 10.0
프로그램 종료
```
정상 실행. `100 / 10 = 10.0` 출력 후 `"프로그램 종료"` 출력.

**입력 ② `abc`:**
```
숫자: abc
숫자가 아닙니다
프로그램 종료
```
`int("abc")`에서 `ValueError` 발생 → `except ValueError` 실행.

**입력 ③ `0`:**
```
숫자: 0
0으로 나눌 수 없습니다
프로그램 종료
```
`int("0")`은 성공하지만 `100 / 0`에서 `ZeroDivisionError` 발생 → `except ZeroDivisionError` 실행.

---

**문제 18. 모범답안:**

- **예외 유형 지정 (`except ValueError`)**: 지정한 예외만 처리합니다. 다른 종류의 예외가 발생하면 프로그램이 중단됩니다. 어떤 오류인지 정확히 알 수 있어 적절한 메시지를 보여줄 수 있습니다.

- **유형 미지정 (`except`)**: **모든** 예외를 처리합니다. 편리하지만, 예상하지 못한 버그까지 숨길 수 있어 위험합니다. 어떤 오류가 발생했는지 알기 어렵습니다.

따라서 가능하면 **구체적인 예외 유형을 지정**하는 것이 권장됩니다.

---

### 🟡 중급

**문제 19. 모범답안:**

**실행 결과:**

```
변환 성공: 42
두 배: 84
작업 완료
```

**실행 순서 규칙:**
1. `try` 블록 실행 → `int("42")`가 성공하여 `"변환 성공: 42"` 출력
2. 예외가 **없으므로** `except`는 건너뜀
3. 예외가 없으므로 `else` 실행 → `"두 배: 84"` 출력
4. `finally`는 **항상** 실행 → `"작업 완료"` 출력

정리: 예외 발생 시 `try → except → finally`, 예외 없을 시 `try → else → finally`

---

**문제 20. 모범답안:**

**실행 결과:**

```
김철수
키 오류: '학과'
등록되지 않은 항목입니다
```

- `data["이름"]`은 키가 존재하므로 `"김철수"` 출력 성공.
- `data["학과"]`는 키가 없어 `KeyError` 발생.
- `as e`로 예외 객체를 변수 `e`에 저장합니다. `KeyError`의 경우 `e`에는 찾으려 했던 키(`'학과'`)가 담깁니다.

**활용법:** `as` 키워드로 받은 예외 정보를 사용하여 사용자에게 어떤 키가 문제인지 알려주거나, 로그 파일에 기록하거나, 예외 타입(`type(e).__name__`)을 확인할 수 있습니다.

---

### 🔴 고급

**문제 21. 모범답안:**

**`raise`의 역할:** 프로그래머가 **직접 예외를 발생**시키는 키워드입니다. 함수의 입력값이 잘못되었거나 비즈니스 규칙에 위반될 때 사용합니다.

**실행 결과:**

```
✓ 85점 등록
✗ 점수는 0~100 사이여야 합니다: 150
✗ 점수는 0~100 사이여야 합니다: -10
✓ 92점 등록
등록된 점수: [85, 92]
```

- `85` → 범위 내이므로 등록 성공
- `150` → `score > 100`이므로 `raise ValueError` 발생 → `except`에서 처리
- `-10` → `score < 0`이므로 `raise ValueError` 발생 → `except`에서 처리
- `92` → 범위 내이므로 등록 성공
- 최종 리스트에는 유효한 점수 `[85, 92]`만 저장

---

## 💻 실습형 정답

---

### 🟢 초급

**문제 22. 모범답안:**

```python
while True:
    try:
        num1 = int(input("첫 번째 숫자: "))
        num2 = int(input("두 번째 숫자: "))
        result = num1 / num2
    except ValueError:
        print("❌ 숫자를 입력해주세요!\n")
    except ZeroDivisionError:
        print("❌ 0으로 나눌 수 없습니다!\n")
    else:
        print(f"✓ {num1} ÷ {num2} = {result:.4f}")
        break
```

핵심: `ValueError`와 `ZeroDivisionError`를 별도로 처리합니다. `else`는 예외 없이 성공했을 때만 실행되어 결과를 출력하고 루프를 종료합니다.

---

**문제 23. 모범답안:**

```python
fruits = ["사과", "바나나", "오렌지", "포도", "딸기"]

print("과일 목록:", end=" ")
for i, f in enumerate(fruits):
    print(f"{i}.{f}", end=" ")
print()

while True:
    try:
        idx = int(input("\n인덱스 입력: "))
        selected = fruits[idx]
    except ValueError:
        print("❌ 숫자를 입력해주세요!")
    except IndexError:
        print(f"❌ 0~{len(fruits)-1} 사이의 번호를 입력해주세요!")
    else:
        print(f"✓ 선택한 과일: {selected}")
        break
```

핵심: 문자열 입력은 `ValueError`, 범위 초과는 `IndexError`로 각각 구분하여 적절한 메시지를 제공합니다.

---

### 🟡 중급

**문제 24. 모범답안:**

```python
students = {}

for i in range(5):
    print(f"\n[{i+1}번 학생]")
    name = input("이름: ")
    
    try:
        score_str = input("점수: ")
        score = int(score_str)
        
        if score < 0 or score > 100:
            raise ValueError("점수는 0~100 사이여야 합니다")
    
    except ValueError as e:
        if "invalid literal" in str(e):
            print("✗ 숫자를 입력해주세요")
        else:
            print(f"✗ {e}")
    
    else:
        students[name] = score
        print("✓ 등록 완료")
    
    finally:
        print("--- 입력 처리 완료 ---")

# 성적표 출력
print("\n=== 성적표 ===")
for name, score in students.items():
    print(f"{name}: {score}점")
print(f"총 등록: {len(students)}명")
```

핵심 포인트:
- `int()` 변환 실패 → 자동 `ValueError` 발생
- 범위 초과 → `raise ValueError()`로 직접 예외 발생
- `else` → 예외 없이 성공한 경우에만 딕셔너리에 저장
- `finally` → 매 입력 후 항상 구분선 출력

---

**문제 25. 모범답안:**

```python
contacts = {"김철수": "010-1111-2222", "박영희": "010-3333-4444"}

print("=== 전화번호부 ===")

while True:
    print("\n1. 검색  2. 추가  3. 삭제  4. 목록  5. 종료")
    choice = input("\n선택: ")
    
    if choice == "1":
        name = input("이름: ")
        try:
            phone = contacts[name]
        except KeyError:
            print(f"❌ '{name}'이(가) 등록되지 않았습니다")
        else:
            print(f"✓ {name}: {phone}")
    
    elif choice == "2":
        try:
            name = input("이름: ")
            if name == "":
                raise ValueError("이름을 입력해주세요")
            phone = input("번호: ")
            contacts[name] = phone
        except ValueError as e:
            print(f"❌ {e}")
        else:
            print(f"✓ {name} 추가 완료")
    
    elif choice == "3":
        name = input("이름: ")
        try:
            del contacts[name]
        except KeyError:
            print(f"❌ '{name}'이(가) 등록되지 않았습니다")
        else:
            print(f"✓ {name} 삭제 완료")
    
    elif choice == "4":
        for name, phone in contacts.items():
            print(f"{name}: {phone}")
        print(f"총 {len(contacts)}명")
    
    elif choice == "5":
        print("종료합니다.")
        break
```

핵심: 딕셔너리 접근 시 `KeyError`를 처리하고, 입력 검증에 `raise`를 활용합니다. `else`로 성공 시에만 확인 메시지를 출력합니다.

---

### 🔴 고급

**문제 26. 모범답안:**

```python
balance = 100000
history = []

def validate_amount(amount_str):
    """금액 검증"""
    amount = int(amount_str)
    if amount <= 0:
        raise ValueError("금액은 양수여야 합니다")
    return amount

print("=== 간이 은행 ===")
print(f"잔액: {balance:,}원")

while True:
    print("\n1. 입금  2. 출금  3. 거래내역  4. 종료")
    choice = input("선택: ")
    
    if choice == "1":
        try:
            amount = validate_amount(input("\n[입금] 금액: "))
        except ValueError as e:
            if "invalid literal" in str(e):
                print("✗ 숫자를 입력해주세요")
            else:
                print(f"✗ {e}")
        else:
            balance = balance + amount
            history.append({"종류": "입금", "금액": amount, "잔액": balance})
            print(f"✓ {amount:,}원 입금 완료 | 잔액: {balance:,}원")
        finally:
            print(f"  현재 잔액: {balance:,}원")
    
    elif choice == "2":
        try:
            amount = validate_amount(input("\n[출금] 금액: "))
            if amount > balance:
                raise ValueError(f"잔액이 부족합니다 (잔액: {balance:,}원)")
            if amount > 500000:
                raise ValueError("1회 출금 한도는 500,000원입니다")
        except ValueError as e:
            if "invalid literal" in str(e):
                print("✗ 숫자를 입력해주세요")
            else:
                print(f"✗ {e}")
        else:
            balance = balance - amount
            history.append({"종류": "출금", "금액": amount, "잔액": balance})
            print(f"✓ {amount:,}원 출금 완료 | 잔액: {balance:,}원")
        finally:
            print(f"  현재 잔액: {balance:,}원")
    
    elif choice == "3":
        print("\n=== 거래 내역 ===")
        if len(history) == 0:
            print("거래 내역이 없습니다.")
        else:
            for i, h in enumerate(history, 1):
                print(f"{i}. [{h['종류']}] {h['금액']:,}원 → 잔액 {h['잔액']:,}원")
        print(f"최종 잔액: {balance:,}원")
    
    elif choice == "4":
        print("이용해 주셔서 감사합니다.")
        break
```

핵심 포인트:
- `validate_amount()` 함수로 금액 검증을 분리합니다.
- `try`: 입력 검증과 비즈니스 규칙(잔액 부족, 한도 초과)을 검사합니다.
- `except`: 모든 오류 메시지를 사용자에게 알려줍니다.
- `else`: 예외 없이 성공한 경우에만 잔액을 변경하고 거래 내역에 기록합니다.
- `finally`: 어떤 상황이든 현재 잔액을 표시합니다.
- 거래 내역을 리스트에 딕셔너리로 저장하여 이력 관리가 가능합니다.

---

조정현 교수 (peterchokr@gmail.com)  
영남이공대학교
